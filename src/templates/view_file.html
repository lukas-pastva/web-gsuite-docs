<!-- File: templates/view_file.html -->
<!DOCTYPE html>
<html>
  <head>
    <title>{{ page_title }} - {{ file_title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  </head>
  <body>
    <header>
      <h1>{{ page_header }}</h1>
    </header>

    <section class="content">
      <!-- Hop Menu (includes "Home" + all file links) -->
      <nav class="hop-menu">
        <ul>
          <li>
            <a class="button" href="{{ home_url }}">Home</a>
          </li>
          {% for slug, title, url in files_data %}
            <li>
              <a class="button" href="{{ url_for('view_file', slug=slug) }}">
                {{ title }}
              </a>
            </li>
          {% endfor %}
          <!-- Also link to the "All QR Codes" page at the end of the menu -->
          <li>
            <a class="button" href="{{ url_for('all_qr_codes') }}">All QR Codes</a>
          </li>
        </ul>
      </nav>

      <h2>{{ file_title }}</h2>

      {% if embed_url %}
        <iframe 
          src="{{ embed_url }}"
          width="100%"
          height="600"
          style="border: none;">
        </iframe>
      {% else %}
        <p>No embed URL available. Possibly not a Google Doc or is missing a link.</p>
      {% endif %}

      <!-- The QR code in bottom-right corner - now clickable -->
      <a href="{{ url_for('view_file_qr_only', slug=slug) }}" target="_blank">
        <img src="{{ qr_code_data_uri }}" alt="QR Code" class="qr-code">
      </a>
    </section>
  </body>
</html>
